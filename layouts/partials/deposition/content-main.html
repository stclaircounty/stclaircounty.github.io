{{/*
  Deposition Main Content (Left Column)

  Contains: Significance, Analysis, Key Quotes
*/}}

{{ $key := .key }}
{{ $data := .data }}
{{ $content := .content }}

<div class="space-y-6">
  {{/* Significance */}}
  {{ with $data.significance }}
  <section class="bg-white rounded-xl border border-slate-200 p-6">
    <h2 class="text-lg font-bold text-navy mb-3 flex items-center gap-2" style="margin-top: 0;">
      <svg class="w-5 h-5 text-amber-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
      Significance
    </h2>
    <div class="prose max-w-none text-slate-700">
      {{ . | markdownify }}
    </div>
  </section>
  {{ end }}

  {{/* Page Content (Markdown) */}}
  {{ with $content }}
  <section class="bg-white rounded-xl border border-slate-200 p-6">
    <h2 class="text-lg font-bold text-navy mb-3 flex items-center gap-2" style="margin-top: 0;">
      <svg class="w-5 h-5 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
      </svg>
      Analysis
    </h2>
    <div class="prose max-w-none">
      {{ . }}
    </div>
  </section>
  {{ end }}

  {{/* Key Quotes */}}
  {{ with $data.key_quotes }}
  <section class="bg-white rounded-xl border border-slate-200 p-6">
    <h2 class="text-lg font-bold text-navy mb-4 flex items-center gap-2" style="margin-top: 0;">
      <svg class="w-5 h-5 text-purple-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
      </svg>
      Key Quotes
      <span class="ml-auto text-sm font-normal text-slate-400">{{ len . }} quotes</span>
    </h2>
    <div class="space-y-4">
      {{ range . }}
      <blockquote class="relative bg-gradient-to-br from-slate-50 to-slate-100 rounded-lg p-5 border-l-4 border-red-500">
        <div class="absolute top-3 right-3 text-4xl text-slate-200 leading-none">"</div>
        <p class="text-slate-700 text-lg pr-8 relative z-10">"{{ .text }}"</p>
        <footer class="mt-3 flex items-center justify-between">
          <span class="text-sm text-slate-500 font-medium">Page {{ .page }}</span>
          {{ with .topic }}
          <span class="text-xs px-2.5 py-1 bg-red-100 text-red-700 rounded-full font-medium">{{ . | humanize }}</span>
          {{ end }}
        </footer>
      </blockquote>
      {{ end }}
    </div>
  </section>
  {{ end }}

  {{/* Related Items */}}
  {{ $hasRelated := or $data.related_incidents $data.related_depositions $data.related_evidence $data.related_timeline }}
  {{ if $hasRelated }}
  <section class="bg-white rounded-xl border border-slate-200 p-6">
    <h2 class="text-lg font-bold text-navy mb-4 flex items-center gap-2" style="margin-top: 0;">
      <svg class="w-5 h-5 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" />
      </svg>
      Related Items
    </h2>
    {{ partial "case-file/related-links.html" (dict "data" $data "title" "") }}
  </section>
  {{ end }}
</div>

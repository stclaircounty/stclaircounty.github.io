{{/*
  Case file card header - date + badges

  Params:
    - data: map - The data object
    - type: string - "incident" | "deposition" | "evidence"
*/}}
{{ $data := .data }}
{{ $type := .type }}

<div class="flex flex-wrap items-center justify-between gap-2 mb-3">
  <div class="flex flex-wrap items-center gap-2">
    {{/* Date */}}
    {{ with $data.date }}
    <span class="text-sm text-slate-light">
      {{ if (time .).IsZero }}{{ . }}{{ else }}{{ (time .).Format "January 2, 2006" }}{{ end }}
    </span>
    {{ end }}

    {{/* Severity badge for incidents */}}
    {{ if eq $type "incident" }}
      {{ with $data.severity }}
      {{ partial "components/badge.html" (dict "type" "severity" "value" . "size" "sm") }}
      {{ end }}
    {{ end }}

    {{/* Type badge */}}
    {{ if eq $type "incident" }}
      {{ with $data.incident_type }}
      {{ partial "components/badge.html" (dict "type" "custom" "value" . "color" "slate" "size" "sm") }}
      {{ end }}
    {{ else if eq $type "evidence" }}
      {{ partial "case-file/evidence-type-badge.html" ($data.evidence_type | default "document") }}
    {{ end }}
  </div>

  {{/* Right side badges */}}
  <div class="flex items-center gap-2">
    {{/* PDF available for depositions */}}
    {{ if and (eq $type "deposition") $data.pdf_file }}
    <span class="badge badge-gold">
      {{ partial "header-icon.html" (dict "icon" "document" "class" "h-3 w-3 mr-1") }}
      PDF
    </span>
    {{ end }}

    {{/* Status badge */}}
    {{ with $data.status }}
    {{ partial "components/badge.html" (dict "type" "status" "value" . "size" "sm") }}
    {{ end }}
  </div>
</div>

{{/*
  People involved section

  Params:
    - people: map of person_key -> { role, description }
    - compact: bool (optional) - Use compact display
*/}}
{{ $people := .people }}
{{ $compact := .compact | default false }}
{{ $peopleData := site.Data.people }}

{{ with $people }}
{{ if $compact }}
{{/* Compact inline display */}}
<div class="flex flex-wrap gap-1.5">
  {{ range $key, $info := . }}
  {{ $person := index $peopleData $key }}
  {{ $hasPage := site.GetPage (printf "/people/%s" $key) }}
  {{ if $hasPage }}
  <a href="/people/{{ $key }}/" class="text-xs px-2 py-0.5 bg-gold/10 text-gold hover:bg-gold/20 rounded inline-flex items-center gap-1">
    {{ with $person }}{{ .name }}{{ else }}{{ $key | humanize }}{{ end }}
    {{ with $info.role }}<span class="text-gold/60">({{ . }})</span>{{ end }}
  </a>
  {{ else }}
  <span class="text-xs px-2 py-0.5 bg-gray-100 text-slate rounded inline-flex items-center gap-1">
    {{ with $person }}{{ .name }}{{ else }}{{ $key | humanize }}{{ end }}
    {{ with $info.role }}<span class="text-slate-light">({{ . }})</span>{{ end }}
  </span>
  {{ end }}
  {{ end }}
</div>
{{ else }}
{{/* Full display with descriptions */}}
<div class="space-y-3">
  {{ range $key, $info := . }}
  {{ $person := index $peopleData $key }}
  {{ $hasPage := site.GetPage (printf "/people/%s" $key) }}
  <div class="flex items-start gap-3 p-3 bg-offwhite rounded-lg">
    <div class="flex-shrink-0 w-10 h-10 bg-navy/10 rounded-full flex items-center justify-center">
      <svg class="h-5 w-5 text-navy" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
      </svg>
    </div>
    <div class="flex-1 min-w-0">
      <div class="flex items-center gap-2 flex-wrap">
        {{ if $hasPage }}
        <a href="/people/{{ $key }}/" class="font-medium text-navy hover:text-accent">
          {{ with $person }}{{ .name }}{{ else }}{{ $key | humanize }}{{ end }}
        </a>
        {{ else }}
        <span class="font-medium text-navy">
          {{ with $person }}{{ .name }}{{ else }}{{ $key | humanize }}{{ end }}
        </span>
        {{ end }}
        {{ with $info.role }}
        <span class="text-xs px-2 py-0.5 rounded-full
          {{ if eq . "plaintiff" }}bg-green-100 text-green-700
          {{ else if eq . "defendant" }}bg-red-100 text-red-700
          {{ else if eq . "arrestee" }}bg-red-100 text-red-700
          {{ else if eq . "command-involved" }}bg-orange-100 text-orange-700
          {{ else if eq . "witness" }}bg-blue-100 text-blue-700
          {{ else }}bg-gray-100 text-slate{{ end }}">
          {{ . | humanize }}
        </span>
        {{ end }}
        {{ with $person }}
          {{ with .role }}<span class="text-xs text-slate-light">{{ . }}</span>{{ end }}
        {{ end }}
      </div>
      {{ with $info.description }}
      <p class="text-sm text-slate mt-1">{{ . }}</p>
      {{ end }}
    </div>
  </div>
  {{ end }}
</div>
{{ end }}
{{ end }}

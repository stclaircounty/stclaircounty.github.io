{{/*
  Incident card for list pages

  Params:
    - key: string - The incident key from data
    - data: map - The incident data object
*/}}
{{ $key := .key }}
{{ $data := .data }}
{{ $href := printf "/incidents/%s/" $key }}

<article class="card hover:shadow-md transition-shadow group">
  {{/* Header */}}
  {{ partial "case-file/card-header.html" (dict "data" $data "type" "incident") }}

  {{/* Title */}}
  <h2 class="text-xl font-bold text-navy mb-2 group-hover:text-accent transition-colors">
    <a href="{{ $href }}">{{ $data.title }}</a>
  </h2>

  {{/* Location */}}
  {{ with $data.location }}
  <p class="text-sm text-slate-light mb-2 flex items-center gap-1">
    {{ partial "header-icon.html" (dict "icon" "location" "class" "h-4 w-4") }}
    {{ . }}
  </p>
  {{ end }}

  {{/* Summary */}}
  {{ with $data.summary }}
  <p class="text-slate mb-3">{{ . | plainify | truncate 180 }}</p>
  {{ end }}

  {{/* Issues */}}
  {{ with $data.issues }}
  {{ partial "components/tag-list.html" (dict "tags" . "max" 4 "color" "red" "class" "mb-3") }}
  {{ end }}

  {{/* People involved compact */}}
  {{ with $data.people_involved }}
  {{ partial "case-file/people-involved.html" (dict "people" . "compact" true) }}
  {{ end }}

  {{/* Footer */}}
  {{ partial "case-file/card-footer.html" (dict "href" $href "type" "incident" "data" $data) }}
</article>
